<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Xorax Website Code Extractor</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-y: auto;
    }

    body {
      font-family: 'Fira Code', monospace;
      background-color: #0d1117;
      color: #c9d1d9;
    }

    #matrixCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background-color: #000;
    }

    .container {
      margin: 60px auto;
      background-color: #161b22;
      padding: 30px;
      border-radius: 10px;
      width: 90%;
      max-width: 900px;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.15);
    }

    h2, h3 {
      color: #58a6ff;
    }

    input[type="url"] {
      width: 100%;
      padding: 12px;
      margin: 15px 0;
      border-radius: 5px;
      border: 1px solid #30363d;
      background-color: #0d1117;
      color: #c9d1d9;
      font-size: 16px;
    }

    button {
      background: #238636;
      color: white;
      border: none;
      border-radius: 5px;
      padding: 12px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #2ea043;
    }

    .code-box {
      margin-top: 10px;
      padding: 15px;
      border-radius: 6px;
      background-color: #0d1117;
      border: 1px solid #30363d;
      font-family: 'Fira Code', monospace;
      font-size: 14px;
      color: #c9d1d9;
      white-space: pre-wrap;
      overflow-x: auto;
    }

    #htmlOutput { border-left: 5px solid #58a6ff; }
    #cssOutput { border-left: 5px solid #f2cc60; }
    #jsOutput { border-left: 5px solid #3fb950; }

    .popup-menu {
      display: none;
      position: fixed;
      top: 50px;
      right: 50px;
      background-color: #21262d;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.2);
      z-index: 100;
      flex-direction: column;
      gap: 10px;
    }

    .popup-menu.show {
      display: flex;
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <canvas id="matrixCanvas"></canvas>

  <div class="container">
    <h2>Website Code Extractor</h2>
    <input type="url" id="websiteUrl" placeholder="Enter website URL">
    <button onclick="getFullCode()">Extract Code</button>

    <h3>HTML Code:</h3>
    <div id="htmlOutput" class="code-box"></div>

    <h3>CSS Code:</h3>
    <div id="cssOutput" class="code-box"></div>

    <h3>JavaScript Code:</h3>
    <div id="jsOutput" class="code-box"></div>
  </div>

  <div id="popupMenu" class="popup-menu">
    <button onclick="copyCode('html')">Copy HTML</button>
    <button onclick="copyCode('css')">Copy CSS</button>
    <button onclick="copyCode('js')">Copy JavaScript</button>
  </div>

  <script>
    async function getFullCode() {
      const websiteUrl = document.getElementById('websiteUrl').value;
      const htmlOutput = document.getElementById('htmlOutput');
      const cssOutput = document.getElementById('cssOutput');
      const jsOutput = document.getElementById('jsOutput');

      htmlOutput.textContent = '';
      cssOutput.textContent = '';
      jsOutput.textContent = '';

      if (!websiteUrl) {
        alert('Please enter a valid website URL.');
        return;
      }

      try {
        const response = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(websiteUrl));
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        const htmlContent = data.contents;
        htmlOutput.textContent = htmlContent;

        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');

        const cssLinks = doc.querySelectorAll('link[rel="stylesheet"]');
        let cssResults = '';
        for (const link of cssLinks) {
          const href = link.getAttribute('href');
          if (!href) continue;
          try {
            const fullCSSUrl = new URL(href, websiteUrl).href;
            const cssResponse = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(fullCSSUrl));
            const cssData = await cssResponse.json();
            cssResults += `\n/* CSS from ${fullCSSUrl} */\n` + cssData.contents + '\n';
          } catch {
            cssResults += `\n/* Failed to fetch CSS from ${href} */\n`;
          }
        }
        cssOutput.textContent = cssResults || 'No external CSS found.';

        const scriptLinks = doc.querySelectorAll('script[src]');
        let jsResults = '';
        for (const script of scriptLinks) {
          const src = script.getAttribute('src');
          if (!src) continue;
          try {
            const fullJSUrl = new URL(src, websiteUrl).href;
            const jsResponse = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(fullJSUrl));
            const jsData = await jsResponse.json();
            jsResults += `\n/* JavaScript from ${fullJSUrl} */\n` + jsData.contents + '\n';
          } catch {
            jsResults += `\n/* Failed to fetch JS from ${src} */\n`;
          }
        }
        jsOutput.textContent = jsResults || 'No external JavaScript found.';

        document.getElementById('popupMenu').classList.add('show');

      } catch (error) {
        console.error(error);
        htmlOutput.textContent = 'Failed to retrieve HTML.';
        cssOutput.textContent = 'Failed to retrieve CSS.';
        jsOutput.textContent = 'Failed to retrieve JavaScript.';
      }
    }

    function copyCode(type) {
      const codeMap = {
        html: 'htmlOutput',
        css: 'cssOutput',
        js: 'jsOutput'
      };
      const outputElement = document.getElementById(codeMap[type]);
      if (outputElement) {
        navigator.clipboard.writeText(outputElement.textContent).then(() => {
          alert(type.toUpperCase() + ' code copied to clipboard!');
        });
      }
    }
  </script>

  <script>
    const canvas = document.getElementById("matrixCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const letters = "アァイィウヴエェオカガキギクグケゲコゴサザシジスズセゼソゾABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    const fontSize = 16;
    const columns = Math.floor(canvas.width / fontSize);
    const drops = Array(columns).fill(1);

    function drawMatrix() {
      ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = "#00ff00";
      ctx.font = `${fontSize}px monospace`;

      for (let i = 0; i < drops.length; i++) {
        const text = letters.charAt(Math.floor(Math.random() * letters.length));
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
          drops[i] = 0;
        }
        drops[i]++;
      }
    }

    setInterval(drawMatrix, 33);

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>
